<html>
<head>
  <title>Creating ASP.NET vNext application on OS X | JPtacek</title>
    <style>
    <link  rel="stylesheet" href="/styles/site.css" />
    </style>
</head>
<body>
 <img src="/images/logo.gif" />
    <h1>Creating ASP.NET vNext application on OS X</h1>
    <p>Santa Claus is Coming to Town!! All the geeks get pretty excited for Santa’s arrival to see what will be awaiting us under the tree
each year. However, sometimes the things geeks are most excited about aren’t ready for Christmas. We can read about them, maybe see
some snippets or even get a preview.</p>
<p>For example, there is a new Star Wars movie coming, but that will not be out until December of 2015, right before Santa’s
next visit. There are also a good percentage of geeks getting excited for the release of Apple Watch, which will be out
sometime in early 2015, so it won’t be waiting under the Christmas tree this year either.</p>
<p>However, one of the things I am most interested in, workwise, while it is arriving in 2015, is available
to kick the tires on now. The early preview present under the tree is running .NET on non-Microsoft platforms like
the OS X or Linux. So while Santa will not be putting the final version under my tree this year, we can at least start
getting ready.</p>
<p>November and December are always exceedingly busy times, but it is worth taking a moment to realize that something huge
happened. Microsoft has opened sourced their .NET framework. I am a big fan of Microsoft’s C# language. I think, for
most developers, it is a great and productive way to get work done. Having this option available on Linux and Mac
machines is going to be great. Throw in ASP.NET MVC and Web API coming along too, and 2015 will be awesome one for
developers.</p>
<p>Scott Hanselman has a <a href="http://www.hanselman.com/blog/AnnouncingNET2015NETAsOpenSourceNETOnMacAndLinuxAndVisualStudioCommunity.aspx">blog post</a>
 where he gets into the details about the open sourcing of .NET and there is a lot to
get into. However, but for now, let us just build an ASP.Net vNext app and jump into it like a kid opening presents on
Christmas morning!</p>
<p>We are going to create an ASP.NET vNext app to countdown several things… the days until Christmas, the days
until the release of the next ASP (assuming Build 2015) and finally, the days until new Star Wars movie.</p>
<p>How do we jump in? These steps are mostly identified on the ASP.NET GitHub page (I know, crazy, right. Microsoft
documenting stuff on GitHub!?!?) at <a href="https://github.com/aspnet/home">https://github.com/aspnet/home</a>. We can still step through.</p>
<p>First, because vocabulary is important…. Since the codename for the next version of ASP.NET vNext is Katana,
Microsoft is going all in with the letter K. So many of the tools utilize the letter K. A quick run through of the
most important.</p>
<ul>
<li><p>KRE is the K Runtime Environment. This is the code that bootstraps your ASP.NET vNext application; compilers,
Common Language Runtime (CLR), etc.</p>
</li>
<li><p>KVM is the K Version Manager. It will install appropriate version of the KRE. You will be able to have multiple ASP.NET vNext runtimes and applications running on your machine.</p>
</li>
<li><p>KPM is the K Package Manager. This will download packages needed for your application to run.</p>
</li>
</ul>
<p>First thing to do is ensure you have Homebrew setup on your OS X machine. If you are doing development work, you most likely have this already, so we will assume you are ready to go.</p>
<p>Next, we need to install the ASP.NET vNext runtime environment (KRE). This is done by downloading appropriate git repositories via a bash script.</p>
<pre><code class="lang-bash">brew tap aspnet/k
</code></pre>
<p>Similar commands are used for other platforms such as Linux and Windows, which uses PowerShell.</p>
<p>The next step is to install KVM (The K Version Manager), which is the runtime manager. It is responsible for getting the runtime and enables multiple different runtimes on the same machine. I have seen some mention of issues using KVM on OS X with different shells, like zsh. I use the Bash shell and have not run into issues. To install KVM type</p>
<pre><code class="lang-bash">brew install kvm
</code></pre>
<p>Next we run a script to setup our environment variables, etc</p>
<pre><code class="lang-bash">source kvm.sh
</code></pre>
<p>We have pretty quickly setup and downloaded the environment to run ASP.NET vNext apps on an OS X machine, but, we have
no code! Thankfully, someone wrote an ASP.NET MVC Project Generator for Yeoman. Yeoman, for those of you not familiar,
is a tool to generate scaffolding for your projects. It utilizes Node.js.</p>
<p>So to get all of this working, you are going to need to have Node.JS and the Node Package Manager (NPM) installed.
Again, since we are talking developers, you probably already have all of this. The next step then is to install
Yeoman, using NPM. From your Bash shell we will install Yeoman first</p>
<pre><code class="lang-bash">npm install –g yo
</code></pre>
<p>Next, we install the generator for ASP.Net</p>
<pre><code class="lang-bash">npm install -g generator-aspnet
</code></pre>
<p>Next step, since we have all of the tools we need installed and downloaded, we can generate our application. This is done by running Yeoman from the bash shell type by typing</p>
<pre><code class="lang-bash">yo aspnet
</code></pre>
<p><img src="osx1.png" alt="Running Yeoman, step1, choose MVC"></p>
<p>We have the option of choosing a console application, a Web App, MVC app or Nancy ASP.NET app. We choose MVC
application and provide a name</p>
<p><img src="osx2.png" alt="Running Yeoman, step2, choose Project Name"></p>
<p>And our application gets generated</p>
<p><img src="osx3.png" alt="Running Yeoman, step3, application is generated"></p>
<p>And we can take a look and see our directory structure, with many of the controllers and views most of us know from
our MVC projects.</p>
<p><img src="osx4.png" alt="After Running Yeoman, step last, tree view"></p>
<p>For those of you well versed in ASP.NET, a couple of pretty interesting things to note. First, no solution file!
Second, no Project file! Most of the Visual Studio generate file constructs are gone. Similar to a Node.JS
application, there is a json file outlining the dependencies needed for an application, as opposed to the Solution
and Project files of Visual Studio. Very cool.</p>
<p>To build and run the application, we use the commands shown in the previous screen shot of the bash shell</p>
<p><code>kpm restore</code>, which gets the packages for your application</p>
<p><code>kpm build</code>, builds the application</p>
<p><code>k kestrel</code>, fires up the web server to serve the pages</p>
<p>By using the kestrel web server we are actually firing up Mono, the open source version of the .NET framework.
We access the location locally on port 5004 (<a href="http://localhost:5004/">http://localhost:5004/</a>)</p>
<p><img src="osx5.png" alt="MVC app on OS X"></p>
<p>So that is all kind of Christmas goodies Santa has for us, what is the most impressive programming language
for business development being able to run on non-Microsoft platforms. When you start thinking about integrating in
with some popular Linux tools like Docker, it doesn’t take a lot to realize things will be a lot different on the .NET
stack when Santa is coming back to town in 2015. Plus, new Star Wars!</p>
<p>You can download this code from a GitHub repository I have setup at
<a href="https://github.com/jptacek/ChristmasCountdown">https://github.com/jptacek/ChristmasCountdown</a></p>
<p>Note: When running the web site, it will use the same port for the web server. I usually exit the process (k kestrel) by typing Ctrl-Z.
However, I need to list the processes using PS and then kill, by typing kill -9 <pid>, the process that is mono.
That way I can restart.</p>
<p><strong>UPDATE (December 17, 2014)</strong> - Links updated to include link to Microsoft <a href="http://blogs.msdn.com/b/webdev/archive/2014/12/17/yeoman-generators-for-asp-net-vnext.aspx">post</a> on Yeoman</p>
<p><strong>UPDATE 2 (December 18, 2014)</strong> - Thanks to <a href="https://twitter.com/sayedihashimi">Sayed Hashimi</a> for helping clean up some typos
with case issues.
<a href="https://twitter.com/sayedihashimi/status/545720905171603456">https://twitter.com/sayedihashimi/status/545720905171603456</a></p>
<p>Links</p>
<ul>
<li>ASP.NET MVC Project Generator for Yeoman - <a href="http://hassakarn.com/2014/02/07/asp-net-mvc-project-generator-for-yeoman/">http://hassakarn.com/2014/02/07/asp-net-mvc-project-generator-for-yeoman/</a></li>
<li>Yeoman - <a href="http://yeoman.io/">http://yeoman.io/</a></li>
<li>ASP.NET GitHub repo - <a href="https://github.com/aspnet/home">https://github.com/aspnet/home</a></li>
<li>OmniSharp.NET - <a href="http://www.omnisharp.net/">http://www.omnisharp.net/</a></li>
<li>GitHub for this Code - <a href="https://github.com/jptacek/ChristmasCountdown">https://github.com/jptacek/ChristmasCountdown</a></li>
<li>Microsoft on Yeoman for ASP.NET - <a href="http://blogs.msdn.com/b/webdev/archive/2014/12/17/yeoman-generators-for-asp-net-vnext.aspx">http://blogs.msdn.com/b/webdev/archive/2014/12/17/yeoman-generators-for-asp-net-vnext.aspx</a></li>
</ul>
<p>This blog post originally appeared at <a href="http://www.skylinetechnologies.com/Blog/Article/2586/12-Days-of-Christmas-Mac.aspx">Skyline Technologies</a>
as part of their <a href="http://www.skylinetechnologies.com/Blog/Article/2586/12-Days-of-Christmas-Mac.aspx">12 Blogs of Christmas series</a></p>

</body>
</html>
